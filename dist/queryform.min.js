(function(a,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(a=typeof globalThis<"u"?globalThis:a||self,a.QueryForm=e())})(this,function(){"use strict";var m=a=>{throw TypeError(a)};var w=(a,e,n)=>e.has(a)||m("Cannot "+n);var h=(a,e,n)=>e.has(a)?m("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,n);var o=(a,e,n)=>(w(a,e,"access private method"),n);var e,d,g,u,y,b,x;class a{constructor(t,s="https://queryform.test/api/website/"){h(this,e);this.websiteId=t,this.domainUTMs=[],this.apiRoute=s}async init(t={debug:!1}){await o(this,e,d).call(this),await o(this,e,g).call(this),t.debug&&console.log("%c Queryform%c v1.0%c Data synced.","background: #222; color: #2563eb; padding: 10px 10px 10px 10px;","background: #222; color: #fff; font-size:8px; padding: 12px 10px 11px 0;","background: #222; color: #777; font-size:8px; padding: 12px 10px 11px 0")}getStoredParams(){if(o(this,e,u).call(this)){let t=JSON.parse(localStorage.getItem("queryform_data"));if(t!==null)return t}return{}}}return e=new WeakSet,d=async function(){try{const t=await fetch(this.apiRoute+this.websiteId);t.ok&&(this.domainUTMs=await t.json())}catch(t){console.warn("Something went wrong.",t)}},g=async function(){const t=o(this,e,y).call(this);o(this,e,b).call(this,t);const s=this.getStoredParams();Object.keys(s).length!==0&&o(this,e,x).call(this,s,this.domainUTMs)},u=function(){return typeof Storage<"u"},y=function(){const t=new URLSearchParams(window.location.search),s={};return Object.values(this.domainUTMs).forEach(c=>{t.has(c.param)&&(s[c.param]=t.get(c.param))}),Object.keys(s).length!==0?s:!1},b=function(t){if(o(this,e,u).call(this)){let s=this.getStoredParams();t&&(s||(s={}),this.domainUTMs.forEach(r=>{t[r.param]&&(s[r.param]={class_name:r.class_name,value:t[r.param]})}),localStorage.setItem("queryform_data",JSON.stringify(s)))}},x=function(t,s){let r=[],c=Object.values(s);Object.keys(t).forEach(function(i,f){r.push("."+t[i].class_name)}),document.querySelectorAll(r).forEach(i=>{const f=i.tagName.toLowerCase()==="input"?i:i.querySelector("input");if(!f)return;i.className.split(" ").forEach(l=>{r.includes("."+l)&&c.forEach(p=>{l===p.class_name&&(f.value=t[p.param].value)})})})},a});
//# sourceMappingURL=queryform.min.js.map
