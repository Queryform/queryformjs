(function(s,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self,s.QueryForm=e())})(this,function(){"use strict";var m=s=>{throw TypeError(s)};var w=(s,e,n)=>e.has(s)||m("Cannot "+n);var h=(s,e,n)=>e.has(s)?m("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,n);var o=(s,e,n)=>(w(s,e,"access private method"),n);var e,d,g,u,y,b,x;class s{constructor(t,a="https://queryform.test/api/website/"){h(this,e);this.websiteId=t,this.domainUTMs=[],this.apiRoute=a}init(t={debug:!1}){o(this,e,d).call(this).then(()=>{o(this,e,g).call(this)}),t.debug&&console.log("%c Queryform%c v1.0%c Data synced.","background: #222; color: #2563eb; padding: 10px 10px 10px 10px;","background: #222; color: #fff; font-size:8px; padding: 12px 10px 11px 0;","background: #222; color: #777; font-size:8px; padding: 12px 10px 11px 0")}getStoredParams(){if(!o(this,e,u).call(this))return{};const t=localStorage.getItem("queryform_data");return t?JSON.parse(t):{}}}return e=new WeakSet,d=async function(){try{const t=await fetch(this.apiRoute+this.websiteId);t.ok&&(this.domainUTMs=await t.json())}catch(t){console.warn("Something went wrong.",t)}},g=function(){const t=o(this,e,y).call(this);o(this,e,b).call(this,t);const a=this.getStoredParams();Object.keys(a).length!==0&&o(this,e,x).call(this,a,this.domainUTMs)},u=function(){return typeof Storage<"u"},y=function(){const t=new URLSearchParams(window.location.search),a={};return Object.values(this.domainUTMs).forEach(c=>{t.has(c.param)&&(a[c.param]=t.get(c.param))}),Object.keys(a).length!==0?a:!1},b=function(t){if(o(this,e,u).call(this)){let a=this.getStoredParams();t&&(a||(a={}),this.domainUTMs.forEach(r=>{t[r.param]&&(a[r.param]={class_name:r.class_name,value:t[r.param]})}),localStorage.setItem("queryform_data",JSON.stringify(a)))}},x=function(t,a){let r=[],c=Object.values(a);Object.keys(t).forEach(function(i,f){r.push("."+t[i].class_name)}),document.querySelectorAll(r).forEach(i=>{const f=i.tagName.toLowerCase()==="input"?i:i.querySelector("input");if(!f)return;i.className.split(" ").forEach(p=>{r.includes("."+p)&&c.forEach(l=>{p===l.class_name&&(f.value=t[l.param].value)})})})},s});
//# sourceMappingURL=queryform.min.js.map
